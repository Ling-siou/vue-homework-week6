import{_ as d,o as r,c as s,F as h,e as l,w as a,b as m,d as p,t as k}from"./index-a7f27421.js";const f="https://vue3-course-api.hexschool.io/v2/",g={props:["mode"],data(){return{userRouters:[]}},computed:{routerList(){return[]}},created(){const t=this.$router.options.routes.find(o=>o.path===this.mode);this.userRouters=[t,...t.children]},methods:{ifAdminChildren(e){return this.mode==="/admin"&&e!=="/admin"?`/admin/${e}`:e},getCookieData(e){const o=`; ${document.cookie}`.split(`; ${e}=`);let i="";return o.length===2&&(i=o[1].split(";")[0]),i},logout(){this.$http.post(`${f}logout`,{},{headers:{Authorization:this.getCookieData("token")}}).then(e=>{alert("已登出"),document.cookie="expired=",document.cookie="token=",this.$router.push({path:"/"})}).catch(()=>{alert("登出失敗")})}}},_=["onClick"],C=p("hr",null,null,-1);function $(e,t,o,i,u,c){return r(),s("div",null,[(r(!0),s(h,null,l(u.userRouters,n=>(r(),s("a",{key:n.path,href:"#",onClick:a(()=>this.$router.push(this.ifAdminChildren(n.path)),["prevent"]),class:"me-2"},k(n.name),9,_))),128)),o.mode==="/admin"?(r(),s("a",{key:0,href:"#",onClick:t[0]||(t[0]=a(()=>c.logout(),["prevent"]))},"登出")):m("",!0),C])}const R=d(g,[["render",$]]);export{R as N};
